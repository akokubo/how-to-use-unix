# UNIXとは何か

**UNIX**（ユニックス）とは、コンピュータを動かすための基本的なソフトウェア、**OS**（オーエス）の一種である。

## OSとは何か

OSとは、**O**perating **S**ystem（オペレーティング・システム）の略で、「コンピュータを操作する」ための基本となるソフトウェアである。日本語では「基本ソフトウェア」や「オペレーティング・システム」などと呼ぶ。OSは、コンピュータのハードウェアとソフトウェアの間を取り持ち、次のような重要な役割を担っている：

* **リソース管理**:
CPU（中央処理装置）やメモリ（記憶装置）、ディスク（補助記憶装置）など、コンピュータの資源（リソース）を効率的に管理する。
* **ユーザー・インターフェース**:
人間がコンピュータを操作するための窓口（画面の表示やマウス、キーボードからの入力の受付など）を提供する。
* **アプリケーションの実行環境**:
エディタやブラウザなどのアプリケーションソフトウェアを動作させるための土台を提供する。

## さまざまなOS

パソコンでは、Microsoft社の**Windows**（ウィンドウズ）シリーズ、Apple社の**macOS**（マックオーエス）シリーズが主に用いられている。その他にもUNIX系のOSやDOS（ディスクオペレーティングシステム）系のOSを使うこともできる。

サーバーなどではUNIX系のOSが主に用いられてきた。中でもLinus Torvalds（リーナス・トーバルズ）が最初にカーネル（核）を開発した**Linux**（リナックス）は広く使われており、**Ubuntu**（ウブントゥ）、**Fedora**（フェドラ）、**Debian**（デビアン）など、多くの「ディストリビューション」（配布パッケージ）が存在する。また、BSD系のUNIXもよく用いられている。BSDは、Berkeley Software Distribution（バークレイ・ソフトウェア・ディストリビューション）の略で、カリフォルニア大学バークレー校で最初に開発された。

Windows 10以降では、**WSL** （**W**indows **S**ubsystem for **L**inux） を利用することで、Windows上でUbuntuなどのLinuxディストリビューションを実行できるようになった。
また、macOSの基盤には、BSD系UNIXの技術を元にしたものが使われている。

さらにスマートフォンでもそのコアとなる部分にはUNIX系の技術が用いられている。
GoogleのAndroidはLinuxをベースにしている。
AppleのiOS（iPhone）やiPadOSはmacOSと同様にBSD系UNIXの技術を元にしたものが使われている。

![Windows 11のデスクトップ]（images/win11_desktop.png）
図1: Windows 11のデスクトップ

![macOSのデスクトップ]（images/macos_desktop.png）
図2: macOSのデスクトップ

![Windowsターミナルで動作するWSL上のUbuntu]（images/win_terminal.png）
図3: Windowsターミナルで動作するWSL上のUbuntu

## OS の役割とは

コンピュータは、CPU、メモリ、ストレージ（ハードディスクやSSD）、入出力装置（キーボード、マウス、ディスプレイなど）といった様々なハードウェアを組み合わせて構成されている。これらを個別に、そして協調させて適切に制御するには、非常に複雑な処理が必要となる。

OSの重要な役割の一つは、このハードウェア制御の複雑さを覆い隠し、ユーザーやアプリケーションソフトウェアから見て、コンピュータをより簡単に、統一的な方法で操作できるようにすることである。これを「**抽象化** （abstraction）」と呼ぶ。

例えば、USBメモリにファイルをコピーする操作を考えてみよう。WindowsやmacOSでは、多くの場合、ファイルのアイコンをUSBメモリのアイコンにドラッグ＆ドロップするだけでコピーが完了する。

![GUIでのファイルコピー操作]（images/win_copy.png）
図4: GUIでのファイルコピー操作

しかし、この直感的な操作の背後では、OSが次のような一連の複雑な処理を実行している：

1. USBメモリがコンピュータに物理的に接続されていることを検知する。
2. USBメモリを制御するための適切なドライバソフトウェア（デバイスドライバ）を呼び出す。
3. USBメモリ内に記録されているファイルシステムの形式（例: FAT32, exFAT, NTFSなど）を認識する。
4. コピー元のファイルが保存されている場所をインデックスから読み出し、その場所からファイルのデータを読み出す。
5. 読み出したデータをUSBメモリ内の適切な空き領域に書き込む。
6. 書き込みがエラーなく正常に完了したかを確認する。

これらの処理は複雑だが、OSが代行してくれるので、私たちは「アイコンをドラッグ＆ドロップする」という単純な操作だけでコピーを行うことができる。
このように、OSはコンピュータの内部的な複雑な処理を「抽象化」し、人間にとって理解しやすく、扱いやすい形に変換して見せてくれる。

## UNIXとは？

### UNIXの特徴

UNIXは、1969年にAT&T社のベル研究所でケン・トンプソン（Ken Thompson）、デニス・リッチー（Dennis Ritchie）らによって開発が始められた、非常に歴史の長いOSである。
当初はDEC社のPDP-7というミニコンピュータ上で開発され、その後PDP-11で本格的に稼働するようになった。

UNIXシステムが持つ主な特徴を以下に紹介する。

1. **マルチユーザー （Multi-user）**:
一台のコンピュータを、複数のユーザーが同時に利用できる。各ユーザーのファイルや実行中のプログラムは互いに保護され、安全に共同作業やリソースの共有が可能である。
2. **マルチタスク （Multi-tasking）**:
一台のコンピュータ上で、同時に複数のプログラム（タスクやプロセスと呼ぶ）を実行できる。例えば、文書を作成しながら音楽を再生したり、ファイルのダウンロード中に別のプログラムを実行することが可能である。これは、それぞれのタスクに、OSがCPUの使用時間を非常に短い単位で割り当て、素早く切り替えることで、あたかも複数のタスクが同時に実行されているように見える「**タイムシェアリングシステム** （時分割システム、TSS: **T**ime **S**haring **S**ystem）」によって実現されている。
3. **階層型ファイルシステム （Hierarchical File System）**:
ファイルやディレクトリ（WindowsやmacOSでの「フォルダ」に相当）を、（上下逆さまに描いた）木の枝ような階層構造で管理する。全てのファイルとディレクトリは、「`/`」で表される「ルートディレクトリ」（ルートは「根っこ」という意味）から始まるツリー構造になり、ファイルの管理や検索を体系的に行うことができる。
4. **デバイスをファイルとして扱う （Everything is a file）**:
プリンタやキーボード、ディスクドライブといった物理的な周辺機器（デバイス）や、通信なども、ファイルと同じように扱えるようにするという設計思想を持つ。「すべてがファイルとして扱える」という考え方に基づき、データの読み書きと共通の操作で、様々な対象を統一的に扱える。
5. **強力なネットワーク機能**:
他のコンピュータと通信するためのネットワーク機能が重視されてきた。現在のインターネットで広く使われているTCP/IPプロトコル群は、はじめはBSD系UNIXで実装され発展してきた。
6. **高い移植性**:
OSの中核部分（カーネル）を含むシステムの大部分が、アセンブラなどではなく、C言語という比較的高水準なプログラミング言語で記述されている。これにより、ハードウェアが異なる様々な種類のコンピュータへ、比較的容易にUNIXシステムを移植できた。この「移植性の高さ」が、UNIXが広範囲に普及し、多くの派生OSを生み出す大きな要因となった。

これらの特徴のいくつかは、今日では多くのOSで当たり前のように採用されているが、UNIXが開発された1970年頃は先進的なものであった。特にマルチユーザー、マルチタスク、ネットワークなどは、革新的な機能だったと言える。

### UNIXとWindows

WSL上のUbuntuやmacOSといったUNIX系システムでも、Windowsと同様に文書作成、プログラミング、ウェブサイト閲覧など、様々な作業を行うことができる。この文書自体もmacOS上で作成したものである。UNIX系システムは、サーバー用途だけでなく、個人のデスクトップPCやノートPCでも十分実用的に利用することができる。

では、UNIX系システムとWindowsの主な違いはどこにあるのだろうか。いくつかの観点から比較してみよう。

1. **操作インターフェース（CLIとGUI）**:
UNIX系のシステムでは伝統的に、キーボードからコマンド（命令）を打ち込んでコンピュータを操作する「**コマンド・ライン・インターフェース（CLI）**」が中心であった。コマンドは、`ls` （**l**i**s**t directory contents）、`cp` （**c**o**p**y files） のように、英単語を短縮したものが多く用いられる。CLIは、習熟すれば複雑な操作を迅速かつ正確に行うことができ、処理を自動化することもできる。コマンドの入力を助け、より高度な機能も提供する「シェル」というプログラムが用意されていて、ユーザーとOSの間を取り持つ。<br>
一方、Windowsでは、画面上のアイコンやメニューをマウスでクリックしたり、ドラッグ＆ドロップして操作する「**グラフィカル・ユーザー・インターフェース （GUI）**」で主に操作する。GUIは直感的で視覚的に分かりやすく、初心者でも比較的容易に操作できるという利点がある。<br>
なお、現代のUNIX系システムの多くは、GUIも備えている。macOSは洗練された独自のAqua（アクア）インターフェースを持ち、UNIXの強力なコマンドライン環境と美しいグラフィック環境を両立させている。WSL環境では、Windowsのデスクトップ環境とLinuxのコマンドライン環境をシームレスに連携させて利用できる。また、UbuntuなどのLinuxディストリビューションでは、GNOME（グノーム） や KDE Plasma（ケーディーイープラズマ） といった様々なデスクトップ環境をインストールでき、WindowsのようなGUI操作が可能である。
2. **マルチユーザーとシングルユーザー**:
UNIX系システムは、当初から複数のユーザーが同時に一台のコンピュータを利用することを前提とした「マルチユーザーシステム」であった。ネットワーク経由でログインもでき、各ユーザーは独立した作業環境とファイル領域を持つ。UNIXがサーバーなどで広く利用されてきた背景には、このマルチユーザー機能がある。<br>
一方、Windowsは、基本的に個人がPCの前で一人で利用することを想定した「シングルユーザー志向」のOSである。ただし、サーバー版 （Windows Server） ではマルチユーザー機能も提供されている。
3. **オープンソースとプロプライエタリ**:
UNIX系システムの中でも、特にLinux （Ubuntuなどその派生を含む） やBSD系のUNIXは、「**オープンソース**」ソフトウェアとして開発されているものが多い。ライセンス形態に応じて条件もあるが、OSの設計図にあたるソースコードが公開されていて閲覧・改変・再配布ができる場合が多い。このオープン性が世界中の開発者の協力と改良を促し、急速な発展と高い信頼性を実現してきた。例えば、Ubuntuの公式サイト （[https://www.ubuntu.com/]（https://www.ubuntu.com/）） からは、OS全体を無料でダウンロードでき、そのソースコードも入手可能である。<br>
macOSはApple社が開発・販売する商用OSであるが、その中核部分であるDarwinカーネルはオープンソース（Apple Public Source License）で公開されている。<br>
これに対し、Microsoft Windowsは「**プロプライエタリ**（proprietary: 独占的）」ソフトウェアであり、ソースコードは原則として公開されていない。ソフトウェアの利用にはライセンス購入が必要である。ただし、WSLは2025年5月からオープンソースになった。
<br>
オープンソースのUNIX系システムでは、Cコンパイラをはじめとする開発ツールや多くの便利なソフトウェアが無料で提供されたり、パッケージ管理システムを通じて簡単に追加インストールでき、開発環境を構築しやすいという利点もある。<br>
WSLの登場により、WindowsユーザーもLinuxのオープンソースの開発環境の恩恵を手軽に受けられるようになった。

## WSL上のUbuntuとmacOS

この文書では、主にWSL （Windows Subsystem for Linux） 上のUbuntuと、AppleのmacOSという二つのUNIX系環境を対象として解説している。これらの環境の基本的な特徴や相違点について補足する。

### カーネル？ ディストリビューション？
この文書には「カーネル」や「ディストリビューション」といった用語が登場するため、ここで簡単に解説しておく。

* **カーネル （Kernel）**:
OSの中核を成すソフトウェアで、「核」という意味である。ハードウェア（CPU、メモリ、ディスクなど）を直接制御し、アプリケーションソフトウェアからの要求に応じてハードウェア資源を割り当てたり、ハードウェアからの情報をソフトウェアに伝えたりする役割を持つ。プロセス（実行中のプログラム）、メモリ、デバイスの管理など、OSの最も基本的な機能を担う。

* **Linuxディストリビューション （Linux Distribution）**:
Linuxカーネルに、シェル、ライブラリ、システムツール、各種アプリケーションソフトウェアなどを組み合わせてパッケージ化し、ユーザーが容易にインストールして利用できるようにしたもののこと。Ubuntu、Fedora、Debian、Arch Linuxなど、異なる目的や思想で作られたさまざまなディストリビューションがある。

### 半角英数←→日本語入力の切り替え（日本語環境）

#### WSL上のUbuntu （Windows環境）
基本的にはWindowsの日本語入力システムをそのまま使う。
日本語キーボードの場合、左上にある[半角/全角]キーで、半角英数と日本語入力を切り替える。現在の入力モードは、画面**下**のタスクバーの右端で確認できる。

#### macOS
英語キーボードでは左下にある[🌐]地球儀キー、日本語キーボードでは[英数]キーと[かな]キーで入力モードを切り替える。現在の入力モードは、画面右**上**のメニューバーの右端で確認できる。

### WSL上のUbuntuの特徴
Windows Subsystem for Linux （WSL） は、Windows上でネイティブに近い形でLinux環境を実行するための互換レイヤーまたは仮想化技術である。特にWSL 2では、軽量な仮想マシン内でLinuxカーネルが動作するため、高い互換性とパフォーマンスを実現している。

主な特徴：
1. **Linuxカーネルの実行**:
WSL 2は、Microsoftが提供する最適化されたLinuxカーネルを仮想マシン上で実行する。これにより、システムコール（システム呼び出し）レベルでの互換性が提供され、ほとんどのLinuxアプリケーションがそのまま動作する。
2. **Ubuntuの容易な導入**:
Microsoft StoreからUbuntu（最も人気のあるLinuxディストリビューションの一つ）を数クリックで簡単にインストールし、利用を開始できる。
3. **ホームディレクトリ**:
WSL上のUbuntuにおけるユーザー個人のファイルが保存される場所（ホームディレクトリ）は、通常 `/home/ユーザー名` というパスになる（例: ユーザー名が `taro` なら `/home/taro`）。
4. **Windowsとのシームレスなファイル共有**:
* WSL上のUbuntuからWindowsのファイルシステムへは、「`/mnt/c`」（Cドライブ）、「`/mnt/d`」（Dドライブ）のように、「`/mnt`」ディレクトリ以下にマウントされた形でアクセスできる。
* 逆に、WindowsのエクスプローラーからWSL上のUbuntuのファイルシステムへは、アドレスバーに「`\\wsl$`」または「`\\wsl.localhost`」と入力することでアクセスできる。
5. **Windowsターミナルとの連携**: Windows 11に標準搭載されているWindowsターミナルのドロップダウンメニューから、WSL上のUbuntuを含む複数の環境のプロファイルを切り替えて、タブ形式で快適に操作できる。

![Windows Terminalのドロップダウンメニュー]（images/win_terminal_dropdown.png）
図5: Windows Terminalのドロップダウンメニュー

### macOSの特徴
macOSは、Apple社が開発・販売するMacコンピュータ用のオペレーティングシステムである。

主な特徴：
1. **UNIXベースの堅牢なカーネル**:
macOSの中核であるDarwinは、BSD （Berkeley Software Distribution） UNIXのプログラムとMachマイクロカーネルの技術を基盤としている。これにより、安定性と信頼性の高いUNIX互換環境を提供しつつ、洗練された独自のユーザーインターフェース （Aqua） を備えている。
2. **ホームディレクトリ**:
macOSでは、各ユーザーのホームディレクトリは「`/Users/ユーザー名`」というパスになる。たとえばユーザー名が「`taro`」なら「`/Users/taro`」である。この構造は、macOSの源流の一つであるNeXTSTEPから受け継がれている。
3. **標準ターミナルとデフォルトシェル**:
macOSには「ターミナル.app」が標準で付属し、「/アプリケーション/ユーティリティ」の中にある。macOS Catalina （10.15） 以降、デフォルトのログインシェルはBashからZsh （Z shell） に変更された。ZshはBashと高い互換性を持ちつつ、より強力な補完機能やカスタマイズ性を備えている。
4. **パッケージ管理システム （Homebrewなど）**:
macOSには標準のシステム全体のパッケージマネージャは存在しないが、サードパーティ製のHomebrewが広く利用されている。Homebrewを使うことで、UNIX系のコマンドラインツールやライブラリ、アプリケーションを簡単にインストール・管理できる。
5. **統合開発環境 （Xcode）**:
AppleはXcodeという強力な統合開発環境 （IDE） を提供しており、SwiftやObjective-Cを用いたmacOS/iOSアプリ開発のほか、C/C++などの汎用プログラミングもサポートする。Xcode Command Line Toolsをインストールすることで、ターミナルからコンパイラやデバッガなどの開発ツールを利用できるようになる。

### WSL上のUbuntuとmacOSの共通点
1. **UNIXコマンド**:
「`ls`」「`cd`」「`mkdir`」「`rm`」「`grep`」「`find`」「`awk`」「`sed`」「`curl`」といった基本的なUNIXコマンドの多くは、どちらのシステムでもほぼ同じように使用できる（表示は多少異なることがある）。これにより、一方の環境で習得したコマンド操作の知識は、もう一方の環境でも役立つ。
2. **シェル環境**:
BashやZshといった共通のシェルが利用可能で、シェルの基本的な使い方やカスタマイズ方法（例: 設定ファイルが「`.bashrc`」や「`.zshrc`」など）も共通している部分が多い。
3. **開発ツール**:
GCC （GNU Compiler Collection）, Clang, Python, Perl, Ruby, Node.jsなど、多くのオープンソースの開発ツールやプログラミング言語が両環境で利用可能である。バージョン管理システムのGitやコンテナを管理するのDockerなども広く使われている。
4. **パッケージ管理**:
UbuntuのAPT （Advanced Package Tool）とmacOSのHomebrewは、コマンドの構文こそ異なるものの、ソフトウェアのインストール、アップデート、アンインストール、依存関係の解決といった機能を提供する。

### パッケージのインストールとアップデート
| 機能                             | WSL上のUbuntu                                 | macOS                         |
| -------------------------------- | --------------------------------------------- | ----------------------------- |
| パッケージのインストール         | `sudo apt install パッケージ名`               | `brew install パッケージ名`   |
| インストール済みパッケージの更新 | `sudo apt update && sudo apt upgrade`         | `brew update && brew upgrade` |

### ファイルパス
#### WSL上のUbuntu
* ホームディレクトリ:
「`/home/ユーザー名`」
* WindowsのC、Dドライブ:
「`/mnt/c`」「`/mnt/d`」
※ WSL上のUbuntuのユーザー名は、Windowsのユーザー名とは独立になっている。

#### macOS
* ホームディレクトリ:
「`/Users/ユーザー名`」
* デスクトップ:
「`/Users/ユーザー名/Desktop`」
* 書類:
「`/Users/ユーザー名/Documents`」
* ダウンロード:
「`/Users/ユーザー名/Downloads`」
* アプリケーション:
「`/Applications`」（アプリケーションの主な格納場所）
